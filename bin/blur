#!/bin/bash

case $# in
    2)
        read RES_X RES_Y <<<$(xdpyinfo | grep dimensions | awk '{print $2}' | awk -Fx '{print $1, $2}')

        geometry="$RES_X"x"$RES_Y"

        ln -sf "$1" "$2"
        convert "$1" \
            -resize "$geometry" -gravity Center -crop "$geometry"+0+0 +repage \
            -grayscale Rec709Luma \
            "$2"_lock
            #-modulate 100,30 \
            #-blue-shift 0.1 \
        ;;
    *)
        echo "usage: $0 FROM_IMG TO_IMG" >&2
        exit 1
        ;;
esac
